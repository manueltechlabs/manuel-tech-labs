---
title: "Secure Docker Secrets on AWS: Real-World Guide"
slug: mastering-docker-secrets-secure-production-ready-deployments-on-aws-With-real-examples
heading: "Secure Docker Deployments on AWS Using Real-World Secrets Management"
image: ./images/i0cnGJVwRlpzuiek.jpg
permalink: mastering-docker-secrets-secure-production-ready-deployments-on-aws-With-real-examples
date: 2025-12-22
author: Manuel
category: devops
type: post
tags: ['docker-secrets', 'devops', 'security', 'docker-compose', 'aws', 'container-security', 'software-engineering', 'production-ready']
desc: "Secure Spring Boot + MySQL on AWS using Docker Secrets. No hardcoded passwords. Real-world config for secure, production-ready deployments."
featuredAt: 2025-12-22
---  

# Mastering Docker Secrets: Secure, Production-Ready Deployments on AWS (With Real Examples)

ğŸ”— GitHub Repo: https://github.com/manueltechlabs/java-blog-project/tree/main

In the world of containerized applications, security isnâ€™t an afterthoughtâ€”itâ€™s the foundation. One of the most common (and dangerous) mistakes developers make? Hardcoding passwords, API keys, or database credentials directly into their apps or configuration files.

But thereâ€™s a better way: Docker Secrets.

In this post, Iâ€™ll walk you through how I securely deployed a Spring Boot application on AWS using Docker Compose, leveraging Docker secrets to protect sensitive dataâ€”no hardcoded passwords, no exposed environment variables, just clean, secure infrastructure.

And yesâ€”this isnâ€™t theory. This setup is live, tested, and working flawlessly on AWS.

## ğŸ› ï¸ The Problem: Why Environment Variables Arenâ€™t Enough

Letâ€™s be honest: itâ€™s tempting to do this:

'''yaml
environment:
  MYSQL_ROOT_PASSWORD: mysecretpassword
'''

But hereâ€™s the catch: anyone who runs docker inspect can see that password in plain text. Even worse, these values often sneak into logs, CI/CD pipelines, or version control.

According to [Dockerâ€™s security guidelines](https://docs.docker.com/engine/security/), sensitive data should never be passed via environment variables in production.

So whatâ€™s the alternative?

ğŸ‘‰ Docker Secrets.

Theyâ€™re mounted as files inside the container (typically under /run/secrets/), encrypted in transit, and never stored in the image layers. Plus, theyâ€™re only accessible to services that explicitly request them.

## ğŸ“¦ Real-World Example: My Spring Boot + MySQL Setup

Hereâ€™s the actual stack I deployed on AWS:

### âœ… Dockerfile (Spring Boot App)

### `Dockerfile`
```yaml
FROM openjdk:21-jdk-oracle
ARG JAR_FILE=target/app-0.0.1-SNAPSHOT.jar
COPY $\{JAR_FILE\} app.jar
ENTRYPOINT ["java","-jar","/app.jar"]   
```

Nothing fancyâ€”clean, minimal, and built for Java 21. The app expects secrets at runtime, not baked in.

### âœ… docker-compose.yml (The Secure Part)

```yaml
services:
  database:
    image: mysql:8.0.39
    secrets:
      - mysql_root_password    
      - mysql_user
      - mysql_password
    environment:
      MYSQL_ROOT_PASSWORD_FILE: /run/secrets/mysql_root_password
      MYSQL_USER_FILE: /run/secrets/mysql_user
      MYSQL_PASSWORD_FILE: /run/secrets/mysql_password
    volumes:
      - db-vol:/var/lib/mysql
    networks:
      - spring_net

  webserver:
    build: .
    secrets:
      - mysql_database
      - mysql_user
      - mysql_password
      - mail_user
      - mail_password
    environment:
      MYSQL_HOST: database
      MYSQL_DATABASE: /run/secrets/mysql_database
      MYSQL_USER: /run/secrets/mysql_user
      MYSQL_PASSWORD: /run/secrets/mysql_password
      MAIL_USER: /run/secrets/mail_user
      MAIL_PASSWORD: /run/secrets/mail_password
    depends_on:
      - database    
    networks:
      - spring_net
    deploy:
      restart_policy:
        condition: on-failure
        delay: 5s
        max_attempts: 3   
```

ğŸ”‘ Notice the _FILE pattern? Thatâ€™s a convention used by official images like MySQL and Spring Boot to read secrets from files instead of environment variables.

### ğŸ”‘ How Docker Secrets Work in Practice

1. Define secrets in docker-compose.yml:

```yaml
secrets:
  mysql_password:
    file: ./secrets/mysql_password.txt
```

2. Store actual values in local files (outside version control):

```sh
echo "s3cr3tP@ssw0rd!" > ./secrets/mysql_password.txt
```

3. Mount them securely at runtime: Docker automatically creates /run/secrets/mysql_password inside the container.

4. Reference them via _FILE environment variables:

```yaml
environment:
  MYSQL_PASSWORD_FILE: /run/secrets/mysql_password
```

## ğŸš€ Deployment on AWS: What You Donâ€™t See (But Should)

Before running docker-compose up, I made sure to:

- âœ… Create external volumes (for persistence):

```sh
docker volume create db-vol
```

- âœ… Copy files to Docker volume

```
# mounts the templates-vol volume to the /templates directory in the temp-container
docker create -v templates-vol:/templates --name temp-container busybox 
docker cp templates/. temp-container:/templates
docker rm temp-container  
```

- âœ… Set up a .gitignore to protect secrets:

```yaml
/secrets/
*.txt
```

- âœ… Use --no-cache and multi-stage builds to avoid leaking data in image layers.

- âœ… SSH into my AWS EC2 instance securely, transfer files via SCP, and deploy with a single command.

No passwords in Git. No exposed configs. Just a secure, repeatable process.

## ğŸ’¡ Why This Matters for Your Infrastructure
- âœ… Security First: Secrets are never in logs, images, or environment variables.
- âœ… Compliance Ready: Meets basic requirements for data protection (GDPR, HIPAA, etc.).
- âœ… Scalable: Works with Docker Compose today, Docker Swarm or Kubernetes tomorrow.
- âœ… Developer-Friendly: Clear separation between code and config.

## ğŸ§© Pro Tips that I want to try:

These are promising practices I plan to implement in future projects for enhanced security.

- Use BuildKit secrets if you need secrets during build time (e.g., private NPM packages).
- Always run chmod 600 on secret files:

```sh
chmod 600 ./secrets/*.txt
```
This makes perfect sense as only the owner of the file will have read access to it.

- Combine with AWS Systems Manager (SSM) or HashiCorp Vault for enterprise-grade secret management.
- Scan your images with docker scan to catch accidental leaks.

## ğŸ Final Thoughts
Secure deployments donâ€™t have to be complex. With Docker secrets, a well-structured docker-compose.yml, and a bit of discipline, you can run production-grade apps on AWSâ€”without fear of credential leaks.

This setup isnâ€™t just secure. Itâ€™s proven. Itâ€™s live. And itâ€™s yours to adapt.

So next time youâ€™re tempted to hardcode a passwordâ€¦ stop. Use Docker secrets instead.

ğŸ” Security isnâ€™t a feature. Itâ€™s a standard.

ğŸ”— GitHub Repo: https://github.com/manueltechlabs/java-blog-project/tree/main